<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Functions to Automate Downloading Geospatial Data Available from Several
    Federated Data Sources • FedData</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">FedData</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
    
<div id="feddata" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#feddata" class="anchor"> </a>FedData</h1></div>

<p><code>FedData</code> is an <em>R</em> package implementing functions to automate downloading geospatial data available from several federated data sources (mainly sources maintained by the US Federal government). Currently, the package allows for retrieval of five datasets:</p>
<ul>
<li>The <a href="http://ned.usgs.gov">National Elevation Dataset (NED)</a> digital elevation models (1 and 1/3 arc-second; USGS)</li>
<li>The <a href="http://nhd.usgs.gov">National Hydrography Dataset (NHD)</a> (USGS)</li>
<li>The <a href="http://websoilsurvey.sc.egov.usda.gov/">Soil Survey Geographic (SSURGO) database</a> from the National Cooperative Soil Survey (NCSS), which is led by the Natural Resources Conservation Service (NRCS) under the USDA,</li>
<li>The <a href="http://www.ncdc.noaa.gov/data-access/land-based-station-data/land-based-datasets/global-historical-climatology-network-ghcn">Global Historical Climatology Network (GHCN)</a>, coordinated by National Climatic Data Center at NOAA,</li>
<li>The <a href="https://daymet.ornl.gov/">Daymet</a> gridded estimates of daily weather parameters for North America, version 3, available from the Oak Ridge National Laboratory’s Distributed Active Archive Center (DAAC), and</li>
<li>The <a href="http://www.ncdc.noaa.gov/data-access/paleoclimatology-data/datasets/tree-ring">International Tree Ring Data Bank (ITRDB)</a>, coordinated by National Climatic Data Center at NOAA.</li>
</ul>
<p>Additional data sources are in the works.</p>
<p>This package is designed with the large-scale geographic information system (GIS) use-case in mind: cases where the use of dynamic web-services is impractical due to the scale (spatial and/or temporal) of analysis. It functions primarily as a means of downloading tiled or otherwise spatially-defined datasets; additionally, it can preprocess those datasets by extracting data within an area of interest (AoI), defined spatially. It relies heavily on the <a href="https://cran.r-project.org/package=sp"><strong>sp</strong></a>, <a href="https://cran.r-project.org/package=raster"><strong>raster</strong></a>, and <a href="https://cran.r-project.org/package=rgdal"><strong>rgdal</strong></a> packages.</p>
<p>This package has been built and tested on a source (Homebrew) install of <em>R</em> on macOS 10.12 (Sierra), and has been successfully run on Ubuntu 14.04.5 LTS (Trusty), Ubuntu 16.04.1 LTS (Xenial) and binary installs of <em>R</em> on Mac OS 10.12 and Windows 10.</p>
<div id="development" class="section level3">
<h3 class="hasAnchor">
<a href="#development" class="anchor"> </a>Development</h3>
<ul>
<li>
<a href="http://bocinsky.io">Kyle Bocinsky</a> - Crow Canyon Archaeological Center, Cortez, CO</li>
</ul>
</div>
<div id="contributors" class="section level3">
<h3 class="hasAnchor">
<a href="#contributors" class="anchor"> </a>Contributors</h3>
<ul>
<li>
<a href="http://casoilresource.lawr.ucdavis.edu/people/dylan-e-beaudette/">Dylan Beaudette</a> - USDA-NRCS Soil Survey Office, Sonora, CA</li>
<li>
<a href="http://scottchamberlain.info/">Scott Chamberlain</a> - ROpenSci and Museum of Paleontology at UC Berkeley</li>
</ul>
</div>
<div id="install-feddata" class="section level3">
<h3 class="hasAnchor">
<a href="#install-feddata" class="anchor"> </a>Install <code>FedData</code>
</h3>
<ul>
<li>
<p>From CRAN:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">'FedData'</span>)</code></pre></div>
</li>
<li>
<p>Development version from GitHub:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"devtools"</span>)
devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">"bocinsky/FedData"</span>)
<span class="kw">library</span>(FedData)</code></pre></div>
</li>
<li>
<p>Linux (Ubuntu 14.04.5 or 16.04.1):</p>
<p>First, in terminal:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sudo add<span class="op">-</span>apt<span class="op">-</span>repository ppa<span class="op">:</span>ubuntugis<span class="op">/</span>ppa <span class="op">-</span>y
sudo apt<span class="op">-</span>get update <span class="op">-</span>q
sudo apt<span class="op">-</span>get install libssl<span class="op">-</span>dev libcurl4<span class="op">-</span>openssl<span class="op">-</span>dev netcdf<span class="op">-</span>bin libnetcdf<span class="op">-</span>dev gdal<span class="op">-</span>bin libgdal<span class="op">-</span>dev</code></pre></div>
<p>Then, in R:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">update.packages</span>(<span class="st">"survival"</span>)
<span class="kw">install.packages</span>(<span class="st">"devtools"</span>)
devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">"bocinsky/FedData"</span>)
<span class="kw">library</span>(FedData)</code></pre></div>
</li>
</ul>
</div>
<div id="demonstration" class="section level3">
<h3 class="hasAnchor">
<a href="#demonstration" class="anchor"> </a>Demonstration</h3>
<p>This demo script is available in the <code>/inst</code> folder at the location of the installed package.</p>
<div id="load-feddata-and-define-a-study-area" class="section level4">
<h4 class="hasAnchor">
<a href="#load-feddata-and-define-a-study-area" class="anchor"> </a>Load <code>FedData</code> and define a study area</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># FedData Tester</span>
<span class="kw">library</span>(FedData)
<span class="kw">library</span>(magrittr)

<span class="co"># Set a directory for testing</span>
testDir &lt;-<span class="st"> "~/FedData Test"</span>
<span class="co"># and create it if necessary</span>
<span class="kw">dir.create</span>(testDir, <span class="dt">showWarnings=</span>F, <span class="dt">recursive=</span>T)
<span class="kw">setwd</span>(testDir)

<span class="co"># Extract data for the Village Ecodynamics Project "VEPIIN" study area:</span>
<span class="co"># http://veparchaeology.org</span>
vepPolygon &lt;-<span class="st"> </span><span class="kw"><a href="reference/polygon_from_extent.html">polygon_from_extent</a></span>(raster<span class="op">::</span><span class="kw">extent</span>(<span class="dv">672800</span>,<span class="dv">740000</span>,<span class="dv">4102000</span>,<span class="dv">4170000</span>),
                                  <span class="dt">proj4string=</span><span class="st">"+proj=utm +datum=NAD83 +zone=12"</span>)</code></pre></div>
</div>
<div id="get-and-plot-the-national-elevation-dataset-for-the-study-area" class="section level4">
<h4 class="hasAnchor">
<a href="#get-and-plot-the-national-elevation-dataset-for-the-study-area" class="anchor"> </a>Get and plot the National Elevation Dataset for the study area</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Get the NED (USA ONLY)</span>
<span class="co"># Returns a raster</span>
NED &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_ned.html">get_ned</a></span>(<span class="dt">template=</span>vepPolygon,
               <span class="dt">label=</span><span class="st">"VEPIIN"</span>)
<span class="co"># Plot with raster::plot</span>
raster<span class="op">::</span><span class="kw">plot</span>(NED)</code></pre></div>
<p><img src="inst/img/NED.png" alt="thing"></p>
</div>
<div id="get-and-plot-the-daymet-dataset-for-the-study-area" class="section level4">
<h4 class="hasAnchor">
<a href="#get-and-plot-the-daymet-dataset-for-the-study-area" class="anchor"> </a>Get and plot the Daymet dataset for the study area</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Get the DAYMET (North America only)</span>
<span class="co"># Returns a raster</span>
DAYMET &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_daymet.html">get_daymet</a></span>(<span class="dt">template=</span>vepPolygon,
               <span class="dt">label=</span><span class="st">"VEPIIN"</span>,
               <span class="dt">elements =</span> <span class="kw">c</span>(<span class="st">"prcp"</span>,<span class="st">"tmax"</span>),
               <span class="dt">years =</span> <span class="dv">1980</span><span class="op">:</span><span class="dv">1985</span>)
<span class="co"># Plot with raster::plot</span>
raster<span class="op">::</span><span class="kw">plot</span>(DAYMET<span class="op">$</span>tmax<span class="op">$</span>X1985.<span class="fl">10.23</span>)</code></pre></div>
<p><img src="inst/img/DAYMET.png" alt="thing"></p>
</div>
<div id="get-and-plot-the-daily-ghcn-precipitation-data-for-the-study-area" class="section level4">
<h4 class="hasAnchor">
<a href="#get-and-plot-the-daily-ghcn-precipitation-data-for-the-study-area" class="anchor"> </a>Get and plot the daily GHCN precipitation data for the study area</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Get the daily GHCN data (GLOBAL)</span>
<span class="co"># Returns a list: the first element is the spatial locations of stations,</span>
<span class="co"># and the second is a list of the stations and their daily data</span>
GHCN.prcp &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_ghcn_daily.html">get_ghcn_daily</a></span>(<span class="dt">template=</span>vepPolygon, 
                            <span class="dt">label=</span><span class="st">"VEPIIN"</span>, 
                            <span class="dt">elements=</span><span class="kw">c</span>(<span class="st">'prcp'</span>))
<span class="co"># Plot the NED again</span>
raster<span class="op">::</span><span class="kw">plot</span>(NED)
<span class="co"># Plot the spatial locations</span>
sp<span class="op">::</span><span class="kw">plot</span>(GHCN.prcp<span class="op">$</span>spatial, <span class="dt">pch=</span><span class="dv">1</span>, <span class="dt">add=</span>T)
<span class="kw">legend</span>(<span class="st">'bottomleft'</span>, <span class="dt">pch=</span><span class="dv">1</span>, <span class="dt">legend=</span><span class="st">"GHCN Precipitation Records"</span>)</code></pre></div>
<p><img src="inst/img/GHCN_prcp.png" alt="thing"></p>
</div>
<div id="get-and-plot-the-daily-ghcn-temperature-data-for-the-study-area" class="section level4">
<h4 class="hasAnchor">
<a href="#get-and-plot-the-daily-ghcn-temperature-data-for-the-study-area" class="anchor"> </a>Get and plot the daily GHCN temperature data for the study area</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Elements for which you require the same data</span>
<span class="co"># (i.e., minimum and maximum temperature for the same days)</span>
<span class="co"># can be standardized using standardize==T</span>
GHCN.temp &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_ghcn_daily.html">get_ghcn_daily</a></span>(<span class="dt">template =</span> vepPolygon, 
                            <span class="dt">label =</span> <span class="st">"VEPIIN"</span>, 
                            <span class="dt">elements =</span> <span class="kw">c</span>(<span class="st">'tmin'</span>,<span class="st">'tmax'</span>), 
                            <span class="dt">years =</span> <span class="dv">1980</span><span class="op">:</span><span class="dv">1985</span>,
                            <span class="dt">standardize =</span> T)
<span class="co"># Plot the NED again</span>
raster<span class="op">::</span><span class="kw">plot</span>(NED)
<span class="co"># Plot the spatial locations</span>
sp<span class="op">::</span><span class="kw">plot</span>(GHCN.temp<span class="op">$</span>spatial, <span class="dt">add=</span>T, <span class="dt">pch=</span><span class="dv">1</span>)
<span class="kw">legend</span>(<span class="st">'bottomleft'</span>, <span class="dt">pch=</span><span class="dv">1</span>, <span class="dt">legend=</span><span class="st">"GHCN Temperature Records"</span>)</code></pre></div>
<p><img src="inst/img/GHCN_temp.png" alt="thing"></p>
</div>
<div id="get-and-plot-the-national-hydrography-dataset-for-the-study-area" class="section level4">
<h4 class="hasAnchor">
<a href="#get-and-plot-the-national-hydrography-dataset-for-the-study-area" class="anchor"> </a>Get and plot the National Hydrography Dataset for the study area</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Get the NHD (USA ONLY)</span>
NHD &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_nhd.html">get_nhd</a></span>(<span class="dt">template=</span>vepPolygon, 
               <span class="dt">label=</span><span class="st">"VEPIIN"</span>)
<span class="co"># Plot the NED again</span>
raster<span class="op">::</span><span class="kw">plot</span>(NED)
<span class="co"># Plot the NHD data</span>
NHD <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">lapply</span>(sp<span class="op">::</span>plot, <span class="dt">col=</span><span class="st">'black'</span>, <span class="dt">add=</span>T)</code></pre></div>
<p><img src="inst/img/NHD.png" alt="thing"></p>
</div>
<div id="get-and-plot-the-nrcs-ssurgo-data-for-the-study-area" class="section level4">
<h4 class="hasAnchor">
<a href="#get-and-plot-the-nrcs-ssurgo-data-for-the-study-area" class="anchor"> </a>Get and plot the NRCS SSURGO data for the study area</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Get the NRCS SSURGO data (USA ONLY)</span>
SSURGO.VEPIIN &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_ssurgo.html">get_ssurgo</a></span>(<span class="dt">template=</span>vepPolygon, 
                     <span class="dt">label=</span><span class="st">"VEPIIN"</span>)
<span class="co"># Plot the NED again</span>
raster<span class="op">::</span><span class="kw">plot</span>(NED)
<span class="co"># Plot the SSURGO mapunit polygons</span>
<span class="kw">plot</span>(SSURGO.VEPIIN<span class="op">$</span>spatial,
     <span class="dt">lwd=</span><span class="fl">0.1</span>,
     <span class="dt">add=</span>T)</code></pre></div>
<p><img src="inst/img/SSURGO_VEP.png" alt="thing"></p>
</div>
<div id="get-and-plot-the-nrcs-ssurgo-data-for-particular-soil-survey-areas" class="section level4">
<h4 class="hasAnchor">
<a href="#get-and-plot-the-nrcs-ssurgo-data-for-particular-soil-survey-areas" class="anchor"> </a>Get and plot the NRCS SSURGO data for particular soil survey areas</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Or, download by Soil Survey Area names</span>
SSURGO.areas &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_ssurgo.html">get_ssurgo</a></span>(<span class="dt">template=</span><span class="kw">c</span>(<span class="st">"CO670"</span>,<span class="st">"CO075"</span>), 
                           <span class="dt">label=</span><span class="st">"CO_TEST"</span>)

<span class="co"># Let's just look at spatial data for CO675</span>
SSURGO.areas.CO675 &lt;-<span class="st"> </span>SSURGO.areas<span class="op">$</span>spatial[SSURGO.areas<span class="op">$</span>spatial<span class="op">$</span>AREASYMBOL<span class="op">==</span><span class="st">"CO075"</span>,]

<span class="co"># And get the NED data under them for pretty plotting</span>
NED.CO675 &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_ned.html">get_ned</a></span>(<span class="dt">template=</span>SSURGO.areas.CO675,
                            <span class="dt">label=</span><span class="st">"SSURGO_CO675"</span>)
               
<span class="co"># Plot the SSURGO mapunit polygons, but only for CO675</span>
<span class="kw">plot</span>(NED.CO675)
<span class="kw">plot</span>(SSURGO.areas.CO675,
     <span class="dt">lwd=</span><span class="fl">0.1</span>,
     <span class="dt">add=</span>T)</code></pre></div>
<p><img src="inst/img/SSURGO_areas.png" alt="thing"></p>
</div>
<div id="get-and-plot-the-itrdb-chronology-locations-in-the-study-area" class="section level4">
<h4 class="hasAnchor">
<a href="#get-and-plot-the-itrdb-chronology-locations-in-the-study-area" class="anchor"> </a>Get and plot the ITRDB chronology locations in the study area</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Get the ITRDB records</span>
ITRDB &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_itrdb.html">get_itrdb</a></span>(<span class="dt">template=</span>vepPolygon,
                        <span class="dt">label=</span><span class="st">"VEPIIN"</span>,
                        <span class="dt">makeSpatial=</span>T)
<span class="co"># Plot the NED again</span>
raster<span class="op">::</span><span class="kw">plot</span>(NED)
<span class="co"># Map the locations of the tree ring chronologies</span>
<span class="kw">plot</span>(ITRDB<span class="op">$</span>metadata, <span class="dt">pch=</span><span class="dv">1</span>, <span class="dt">add=</span>T)
<span class="kw">legend</span>(<span class="st">'bottomleft'</span>, <span class="dt">pch=</span><span class="dv">1</span>, <span class="dt">legend=</span><span class="st">"ITRDB chronologies"</span>)</code></pre></div>
</div>
</div>
</div>
<div id="thing" class="section level1">
<h1 class="hasAnchor">
<a href="#thing" class="anchor"> </a>
<img src="inst/img/ITRDB.png" alt="thing">
</h1>
<div id="acknowledgements" class="section level3">
<h3 class="hasAnchor">
<a href="#acknowledgements" class="anchor"> </a>Acknowledgements</h3>
<p>This package is a product of SKOPE (<a href="http://www.openskope.org">Synthesizing Knowledge of Past Environments</a>) and the Village Ecodynamics Project. This software is licensed under the <a href="https://opensource.org/licenses/MIT">MIT license</a>.</p>
</div>
</div>

  </div>

  <div class="col-md-3" id="sidebar">
    <h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cran.r-project.org/package=FedData">https://​cran.r-project.org/​package=FedData</a>
</li>
<li>Report a bug at <br><a href="https://github.com/bocinsky/FedData/issues">https://​github.com/​bocinsky/​FedData/​issues</a>
</li>
</ul>
<h2>License</h2>
<p><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE">LICENSE</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>R. Kyle Bocinsky <br><small class="roles"> Author, maintainer </small> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
<html><body>
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=FedData"><img src="http://www.r-pkg.org/badges/version/FedData" alt="cran version"></a></li>
<li><a href="https://github.com/metacran/cranlogs.app"><img src="http://cranlogs.r-pkg.org/badges/grand-total/FedData" alt="rstudio mirror downloads"></a></li>
<li><a href="https://travis-ci.org/bocinsky/FedData"><img src="https://api.travis-ci.org/bocinsky/FedData.png" alt="Build Status"></a></li>
<li><a href="https://codecov.io/github/bocinsky/FedData?branch=master"><img src="https://img.shields.io/codecov/c/github/bocinsky/FedData/master.svg" alt="Coverage Status"></a></li>
</ul>
</body></html>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by R. Kyle Bocinsky.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
